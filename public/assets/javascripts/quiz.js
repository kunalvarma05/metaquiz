jQuery(document).ready(function(){window.option_selected=!1;var e=jQuery(".quiz-question-timer").TimeCircles({start:!1,total_duration:11,direction:"Clockwise",bg_width:1,fg_width:.1,circle_bg_color:"#333356",time:{Days:{show:!1},Hours:{show:!1},Minutes:{show:!1},Seconds:{show:!0,color:"blueviolet"}}});e.addListener(function(o,i,s){parseInt(s)<0&&(e.stop(),n())});var o=jQuery("#quiz_id").val(),i=jQuery("meta[name=_token]").attr("content"),s=function(){jQuery(".quiz-question-timer").removeClass("in"),jQuery.ajax({url:"/app/quiz/questions",type:"POST",data:{quiz_id:o},headers:{"X-CSRF-Token":i}}).done(function(i){if(i.all_answered)jQuery(".play-quiz-page").fadeOut(400).remove(),jQuery(".quiz-result-loader").delay(500).fadeIn(400),setTimeout(function(){window.location=routes.route("app.quiz.results",{quiz_id:o})},1e3);else{jQuery(".quiz-marks").fadeIn(500);var s=jQuery("#quiz-questions").inject(i);jQuery(".quiz-canvas").html(s),jQuery(".quiz-question-options").fadeOut(0),e=e.restart().stop(),jQuery(".quiz-question-timer").addClass("in"),setTimeout(function(){e.restart(),jQuery(".quiz-question-options").fadeIn(200)},3e3)}}).fail(function(e){console.log(e)})},t=function(e){var o=jQuery(".quiz-marks .mark-count"),i=jQuery(".quiz-marks .progress"),s=jQuery(".quiz-marks .progress-bar"),t=i.height();if(console.log(t),e.is_correct){var n=parseInt(o.text()),a=parseInt(e.marks),r=parseInt(20-a),u=(s.height(),t*r/100),d=s.height()+u;console.log(d),o.addClass("success"),s.addClass("progress-bar-success"),s.height(d),o.text(parseInt(n+parseInt(e.marks))),setTimeout(function(){o.removeClass("success"),s.removeClass("progress-bar-success")},1500)}else o.addClass("danger"),s.addClass("progress-bar-danger"),setTimeout(function(){o.removeClass("danger"),s.removeClass("progress-bar-danger")},1500)};s(),jQuery(document).on("click",".quiz-question-option",function(){if(!window.option_selected){e.stop();var n=parseInt(e.getTime()),a=jQuery(this);jQuery(this).addClass("active");var r=a.data("option-id"),u=a.data("question-id");jQuery.ajax({url:"/app/quiz/check/answer",type:"POST",data:{quiz_id:o,question_id:u,option_id:r,time_remaining:n},headers:{"X-CSRF-Token":i}}).done(function(e){t(e),s()}).fail(function(e){console.log(e)}).always(function(e){console.log(e)})}});var n=function(){if(!window.option_selected){e.stop();var n=parseInt(e.getTime()),a=jQuery(".quiz-question-option").first(),r=a.data("option-id"),u=a.data("question-id");jQuery.ajax({url:"/app/quiz/no-answer-chosen",type:"POST",data:{quiz_id:o,question_id:u,option_id:r,time_remaining:n},headers:{"X-CSRF-Token":i}}).done(function(e){t(e),s()}).fail(function(e){console.log(e)}).always(function(e){console.log(e)})}}});