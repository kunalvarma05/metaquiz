jQuery(document).ready(function(){var e=parseInt(getCurrentUserInfo("id")),n=io.connect("http://localhost:3000/users-online");n.on("connect",function(){jQuery.getJSON("ajax/user/friends",function(i){n.emit("init",{user_id:e,friends:i})})}),n.on("friend_online",function(i){jQuery(".friends-online-widget").find("[data-user-id="+i+"]").length||jQuery.getJSON("ajax/user_info/"+i,function(e){var n=jQuery("#online-user-template").inject(e);jQuery(".friends-online-widget").find(".widget-body").append(n),log(e)}),log("friend online: "+i),n.emit("friend_online_acknowledge",{user_id:e,friend_id:i})}),n.on("friend_online_acknowledge",function(e){jQuery(".friends-online-widget").find("[data-user-id="+e+"]").length||jQuery.getJSON("ajax/user_info/"+e,function(e){var n=jQuery("#online-user-template").inject(e);jQuery(".friends-online-widget").find(".widget-body").append(n),log(e)}),log("friend online: "+e)}),n.on("friend_offline",function(e){var n=jQuery(".friends-online-widget").find("[data-user-id="+e+"]");n.length&&n.remove(),log("friend offline: "+e)})});